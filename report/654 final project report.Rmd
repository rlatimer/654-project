---
title: "Predicting Length of Stay for Shelter Dogs"
author: "Rachael Latimer"
fontsize: 11pt
output:
  pdf_document:
    highlight: tango
---

```{r setup, include=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = FALSE)
require(readr)
require(caret)
require(recipes)
require(finalfit)
require(glmnet)
require(stringr)
require(ranger)
require(ggplot2)
require(forcats)
require(gt)

```

```{r data, include=FALSE, warning=FALSE}
data <- read_csv("C:/Users/rlatimer/Documents/personal/EDLD MS/EDLD 654 DS/654project/data/aac_intakes_outcomes.csv")
month_count<-data %>%
  count(intake_month,sort=TRUE) 

month_count_wide <- month_count %>% 
  pivot_wider(names_from = "intake_month",
              values_from = "n")
```


|  As people stayed home for most of the early days of the coronavirus pandemic, the demand for goods and services increased. Some of the increased demand was not surprising and likely expected; items such as home workout equipment, trampolines, and lumber. However, some of the demand took the industry by surprise: yeast for baking, and pets. In fact, the interest in pet adoption increased so much that shelters were regularly reporting empty kennels and sifting through dozens of adoption applications for a single puppy.  
|  Unfortunately, as vaccines were rolled out and people began returning to work and school, shelters and foster groups filled up with animals that were no longer compatible with people’s lifestyles. The decrease in demand for dogs means that people can be more selective in the kind of dog they adopt. However, the information provided by animal shelters and rescue groups are often based on a short period of time with the animal and the animal’s appearance. One shelter’s Border collie mix might be another’s spaniel or shepherd mix. This best guess breed identification can have significant impacts on a dog’s future and could be the difference between adoption and euthanasia. Objectively identifying the impact of a dog’s listed breed on the length of stay in an animal shelter could provide shelters with the information needed to shift away from listing a dog’s breed as the primary information for potential adopter and toward a more holistic evaluation of a dog’s temperament and future needs.

```{r cars, warning = FALSE, message = FALSE, echo=TRUE}
summary(cars)
```

## Data
|  The data were obtained from [kaggle] (https://www.kaggle.com/aaronschlegel/austin-animal-center-shelter-intakes-and-outcomes?select=aac_intakes_outcomes.csv). It was originally provided by the Austin Animal Center in Austin, Texas. The data include information about the intake and outcome of the animal, and details on the type and condition of the animal. A brief examination of the data revealed that the animal shelter takes in animals in addition to typical domestic pets (cats and dogs). For the purposes of this study, the following types of animals were excluded: cats, birds, and animals that were classified as other, including rabbits, bats, snakes, raccoons, ferrets, reptiles, and other wild animals that live in close proximity to humans. Additionally, dog breeds with sample sizes less than 20 were excluded as this small sample made it difficult to accurately model the length of stay for the breed. The final data set included variables of the animal (breed, age on intake, sex, condition of the animal), circumstances of the animal arriving at the shelter (type of intake, month of intake), and specifics of the outcome of the animal (outcome, month of outcome, time spent in the shelter, measured in days).  
|  Initial data visualization was performed to understand the data available. This included visualizing the number of animals taken into the shelter each month (Figure 1) and further exploring the number of each type of animal taken in each month (Table 1). 

**Figure 1.** _Shelter Animals Taken in Each Month_
```{r fig1, warning = FALSE, message = FALSE, echo=FALSE}
#Rough histogram of total animal intakes by month
ggplot(data = month_count, mapping = aes(intake_month,n)) + 
  geom_point()+
  geom_line()
```

**Table 1.** _Type of Shelter Animal Taken in Each Month_

```{r table1, warning = FALSE, message = FALSE, echo=FALSE}
#Table of Intake of Animal Type by Month

smry <- data %>% 
  count(animal_type, intake_month) %>% 
  drop_na(animal_type,intake_month) %>%
  pivot_wider(names_from = "animal_type", 
   values_from = "n") 

smry %>% 
  gt() %>% 
tab_spanner(
  label = "Animal Type",
  columns = vars(`Bird`, `Cat`, `Dog`, `Other`)
) %>% 
  data_color(
    vars(`Bird`, `Cat`, `Dog`, `Other`),
    colors = scales::col_numeric(
      palette = c("#FFFFFF", "#FF0000"),
      domain = NULL
    )
  ) %>%
  cols_label(intake_month = "Intake Month")
```

## Models
|  Three types of modeling approaches were explored: linear regression, linear regression with ridge penalty, and bagged trees. 


## Results



**Table 2.**
```{r table2, warning = FALSE, message = FALSE, echo=FALSE}
#plot(pressure)
```



## Discussion

## Conclusion


## References

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
